<!--Exercise Section-->


<table style="border-spacing: 0px;border-collapse: collapse;font-family:serif">
<tr>
<td width=25% style="vertical-align:middle;background-color:darkorange;border: 2px solid darkorange">
<i class="fa fa-cogs fa-lg fa-pull-left fa-fw" style="color:white;padding-right: 12px;vertical-align:text-top"></i>
<span style="color:white;font-size:x-large;font-weight: bold">Exercise 1</span>
</td>
<td style="border: 2px solid darkorange;background-color:darkorange;color:white">
<span style="color:white;font-size:x-large;font-weight: bold">Grounds Maintenance Project - Schema Editing</span>
</td>
</tr>

<tr>
<td style="border: 1px solid darkorange; font-weight: bold">Data</td>
<td style="border: 1px solid darkorange">City Parks (MapInfo TAB)</td>
</tr>

<tr>
<td style="border: 1px solid darkorange; font-weight: bold">Overall Goal</td>
<td style="border: 1px solid darkorange">Calculate the size and average size of each park in the city, to use in Grounds Maintenance estimates for grass cutting, hedge trimming, etc.</td>
</tr>

<tr>
<td style="border: 1px solid darkorange; font-weight: bold">Demonstrates</td>
<td style="border: 1px solid darkorange">Structural Transformation, Schema Editing</td>
</tr>

<tr>
<td style="border: 1px solid darkorange; font-weight: bold">Start Workspace</td>
<td style="border: 1px solid darkorange">None</td>
</tr>

<tr>
<td style="border: 1px solid darkorange; font-weight: bold">End Workspace</td>
<td style="border: 1px solid darkorange">C:\FMEData2019\Workspaces\DesktopBasic\DataTransformation-Ex1-Complete.fmw</td>
</tr>

</table>


You have just landed a job as a technical analyst in the GIS department of your local city.

The team responsible for maintaining parks and other grassed areas needs to know the area and facilities of each park in order to plan their budget for the upcoming year. You have been assigned to this project and will use FME to provide a dataset of this information.

The first step in this example is to rename existing attributes and create new ones in preparation for the later area calculations.


<br>**1) Start FME Workbench**
<br>Start FME Workbench, then use the Generate Workspace dialog to create a workspace using these parameters:

<table style="border: 0px">

<tr>
<td style="font-weight: bold">Reader Format</td>
<td style="">MapInfo TAB (MITAB)</td>
</tr>

<tr>
<td style="font-weight: bold">Reader Dataset</td>
<td style="">C:\FMEData2019\Data\Parks\Parks.tab</td>
</tr>

<tr>
<td style="font-weight: bold">Writer Format</td>
<td style="">MapInfo TAB (MITAB)</td>
</tr>

<tr>
<td style="font-weight: bold">Writer Dataset</td>
<td style="">C:\FMEData2019\Output\Training</td>
</tr>

</table>

Yes! Here we write back to the same format of data we are reading from! You may click the Parameters buttons in the Generate Workspace dialog to check the reader/writer parameters, but none of them need changing in this exercise. Note that the writer needs only a folder and not a specific file name.

![](./Images/Img2.200.Ex1.GenerateDialog.png)


<br>**2) View Data**
<br>Before we can begin to manipulate our data, we should first look at it and see what we are working with.

Click on the Parks reader feature type to bring up the popup menu. Then from the popup menu, click on the View Source Data button:

![](./Images/Img2.201.Ex1.ViewSourceData.png)

The source data will then open up in the Visual Preview window. In this exercise we are interested in setting up the the writer to have the attribute names we want as well as assigning the data the correct data type. Becoming familar with how the output data is structured is important. For the MapInfo (MITAB) format, these are the data types:

* **char:** A string character, no math operations can be performed
* **float:** A number with a decimal value
* **integer:** A whole number, no decimals (32-bits)
* **smallint:** A whole number, no decimals (16-bits)

There are other data types that are covered in greater detail in the [MapInfo TAB (MITAB) documentation](https://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_ReadersWriters/mitab/user_attributes_w.htm). For our dataset we have some character data (3-4, 7-9), integer data (5) and small integer data (1-2, 6):

![](./Images/Img2.202.Ex1.DataTypesVP.png)

We will need to make sure that the writer is assigning these data types correctly as well we want to remove the extra attribute we do not need.

<br>**3) Rename Feature Type**
<br>FME creates a workspace where the destination schema matches the source. However, the end user of the data has requested parts of the schema are cleaned up.

Inspect the writer feature type parameters. Click in the field labeled Table Name (remember this label is format-specific and in MapInfo we deal with "tables") and change the name from Parks to ParksMaintenanceData:

![](./Images/Img2.203.Ex1.WriterGeneralSchemaEdited.png)


<br>**4) Update Attributes**
<br>Now inspect the user attributes. They will look like this:

![](./Images/Img2.204.Ex1.WriterAttributeSchema.png)

These must be cleaned up so that unnecessary information is removed. Other attributes need to be updated and some extra ones added to store the calculation results. So carry out the following actions:

<table style="border: 0px">

<tr>
<td style="font-weight: bold">Delete Attribute</td>
<td style="">RefParkID</td>
</tr>

<tr>
<td style="font-weight: bold">Delete Attribute</td>
<td style="">DogPark</td>
</tr>

<tr>
<td style="font-weight: bold">Delete Attribute</td>
<td style="">Washrooms</td>
</tr>

<tr>
<td style="font-weight: bold">Delete Attribute</td>
<td style="">SpecialFeatures</td>
</tr>

<tr>
<td style="font-weight: bold">Rename Attribute</td>
<td style="">from: NeighborhoodName</td>
<td style="">to: Neighborhood</td>
</tr>

<tr>
<td style="font-weight: bold">Change Type (VisitorCount)</td>
<td style="">from: smallint</td>
<td style="">to: integer</td>
</tr>

<tr>
<td style="font-weight: bold">Add Attribute</td>
<td style="">ParkArea</td>
<td style="">type: Float</td>
</tr>

<tr>
<td style="font-weight: bold">Add Attribute</td>
<td style="">AverageParkArea</td>
<td style="">type: Float</td>
</tr>

</table>

The attribute list should now look like this:

![](./Images/Img2.205.Ex1.WriterAttributeSchemaEdited.png)

Now when the workspace is run the output will be named ParksMaintenanceData.tab and will contain an updated attribute schema.


<br>**5) Un-Expose Source Attributes**
<br>The workspace will now look like this:

![](./Images/Img2.206.Ex1.EditedSchemaOnCanvas.png)

---

<!--New Section-->

<table style="border-spacing: 0px">
<tr>
<td style="vertical-align:middle;background-color:darkorange;border: 2px solid darkorange">
<i class="fa fa-bolt fa-lg fa-pull-left fa-fw" style="color:white;padding-right: 12px;vertical-align:text-top"></i>
<span style="color:white;font-size:x-large;font-weight: bold;font-family:serif">NEW</span>
</td>
</tr>

<tr>
<td style="border: 1px solid darkorange">
<span style="font-family:serif; font-style:italic; font-size:larger">
New for FME 2019.0: objects on the canvas will automatically be resized (as in the above screenshot) to fit feature type names.
</span>
</td>
</tr>
</table>

---

Notice there are several source attributes that are not going to be used in the workspace or sent to the output. We can tidy the workspace by hiding these.

Inspect the User Attributes tab on the reader feature type parameters. It will look like this:

![](./Images/Img2.207.Ex1.ReaderAttrSchema.png)

Uncheck the checkbox for the following attributes, which we do not need:

- RefParkID
- Washrooms
- SpecialFeatures

This is the list of attributes we deleted, except for DogParks, which we will make use of in the translation.

Click Apply/OK to confirm the changes.


<br>**6) Save the Workspace**
<br>Save the workspace â€“ it will be completed in further examples. It should now look like this:

![](./Images/Img2.208.Ex1.EditedSchemaOnCanvas.png)


---
<!--Person X Says Section-->

<table style="border-spacing: 0px">
<tr>
<td style="vertical-align:middle;background-color:darkorange;border: 2px solid darkorange">
<i class="fa fa-quote-left fa-lg fa-pull-left fa-fw" style="color:white;padding-right: 12px;vertical-align:text-top"></i>
<span style="color:white;font-size:x-large;font-weight: bold;font-family:serif">FME Lizard says...</span>
</td>
</tr>

<tr>
<td style="border: 1px solid darkorange">
<span style="font-family:serif; font-style:italic; font-size:larger">
Some Writer attributes have red connection arrows because there is nothing to map them to yet (ParkArea or AverageParkArea) or the name has changed (Neighborhood). While VisitorCount is green but doesn't show a connection line, this is because the data is still the same yet the output data type has changed.
<br><br>You can still run this workspace just to see what the output looks like anyway.
</span>
</td>
</tr>
</table>

---

<!--Exercise Congratulations Section-->

<table style="border-spacing: 0px">
<tr>
<td style="vertical-align:middle;background-color:darkorange;border: 2px solid darkorange">
<i class="fa fa-thumbs-o-up fa-lg fa-pull-left fa-fw" style="color:white;padding-right: 12px;vertical-align:text-top"></i>
<span style="color:white;font-size:x-large;font-weight: bold;font-family:serif">CONGRATULATIONS</span>
</td>
</tr>

<tr>
<td style="border: 1px solid darkorange">
<span style="font-family:serif; font-style:italic; font-size:larger">
By completing this exercise you have learned how to:
<br>
<ul><li>Edit the attributes on a writer schema</li>
<li>Edit the output feature type name on a writer schema</li>
<li>Hide attributes on a reader schema</li></ul>
</span>
</td>
</tr>
</table>
