|  练习3 |  地面维护项目 - 计算统计 |
| :--- | :--- |
| 数据 | 城市公园（MapInfo TAB） |
| 总体目标 | 计算城市中每个公园的大小和平均大小，以用于割草，树篱修剪等的地面维护估算。 |
| 演示 | 内容转换。模式映射 |
| 启动工作空间 | C:\FMEData2019\Workspaces\DesktopBasic\Transformation-Ex3-Begin.fmw |
| 结束工作空间 | C:\FMEData2019\Workspaces\DesktopBasic\Transformation-Ex3-Complete.fmw C:\FMEData2019\Workspaces\DesktopBasic\Transformation-Ex3-Complete-Advanced.fmw |

让我们继续您的地面维护项目。

如果您忘记了，负责维护公园和其他草地区域的团队需要了解每个公园的面积和设施，以计划下一年的预算。

在项目的这一部分中，我们将计算每个园区的大小和平均大小，并确保信息正确映射到目标模式。

  
**1）启动Workbench**  
 启动Workbench（如有必要）并从练习2打开工作空间。或者，您可以打开C:\FMEData2019\Workspaces\DesktopBasic\Transformation-Ex3-Begin.fmw

  
**2）添加AreaCalculator转换器**  
要测量每个Park功能的面积，必须使用AreaCalculator转换器。“Calculator”是FME计算新属性值时的术语。

单击Tester:Passed port和写模块要素类型 _ParksMaintenanceData_ 之间的连接。开始输入字母“areac”。您将看到下方显示匹配转换器的“快速添加”列表。

通过双击选择名为AreaCalculator的转换器：

![](./Images/Img2.222.Ex3.QuickAddAreaCalculator.png)

  
**3）添加StatisticsCalculator转换器**  
使用相同的方法，在AreaCalculator:Output端口和 _ParksMaintenanceData_ 要素类型之间放置StatisticsCalculator转换器。
默认情况下，输出连接将位于“Summary”端口上，但是我们需要完整的数据集，因此将连接移至“Complete”端口：

![](./Images/Img2.223.Ex3.StatsCalcInCanvas.png)

  
**4）检查AreaCalculator参数**  
检查AreaCalculator参数：

![](./Images/Img2.224.Ex3.AreaCalcParameters.png)

默认设置会将计算值放入名为\_area的属性中。但是， _ParksMaintenanceData_ 模式需要一个名为ParkArea的属性，因此请更改此参数以创建正确的属性：

![](./Images/Img2.225.Ex3.AreaCalcEditedParameters.png)

单击“确定”或“应用”后，请注意写模块要素类型上的属性现在标记为已连接。

  
**5）检查StatisticsCalculator参数**  
红色图标表示StatisticsCalculator具有需要定义的参数。

检查StatisticsCalculator转换器的参数。要分析的属性是包含计算面积的属性; 所以选择ParkArea：

![](./Images/Img2.226.Ex3.StatsCalcParameters1.png)

检查公园平均大小的属性名称的默认设置。目前，它与_ParksMaintenanceData_模式不匹配，后者需要名为AverageParkArea的属性。

将属性从\_mean更改为AverageParkArea。出于最佳实践原因，删除/取消设置不需要的任何StatisticsCalculator输出属性（例如\_min和\_sum）。

![](./Images/Img2.227.Ex3.StatsCalcParameters2.png)  


**6) 运行工作空间**
如果需要，添加另一个书签并运行工作空间。工作空间运行完毕后，单击ParksMaintenanceData写模块要素类型以弹出弹出菜单，然后单击“View Written Data”按钮以在Visual Preview中查看数据。

![](./Images/Img2.228.Ex3.ViewWrittenData.png)


结果将显示在“ Visual Preview”窗口中：

![](./Images/Img2.229.Ex3.VPTableView.png)

Table View窗口显示每个公园的面积以及所有公园的平均面积。


**7）保存工作空间**  
保存工作空间 - 它将在后面的示例中完成。

|  高级练习 |
| :--- |
|  请注意，表视图中的数字显示结果已计算为12位小数。这超出了您所需的精度。作为一项高级任务 - 如果你有时间 - 使用AttributeRounder转换器将值减少到只有2位小数。  |
|  如果您愿意，您还可以计算最小，最大和总面积; 但是如果希望它们出现在输出中，请不要忘记将它们添加到写模块模式中。|

<table>
  <thead>
    <tr>
      <th style="text-align:left">恭喜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">
        <p>通过完成本练习，您已学会如何：
          <br />
        </p>
        <ul>
          <li>用转换器（AreaCalculator，StatisticsCalculator）进行内容转换</li>
          <li>使用弹出按钮管理转换器连接</li>
          <li>使用转换器参数创建与写模块模式匹配的属性</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
