 <div id="readme" class="readme blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-additional-procedures" class="anchor" aria-hidden="true" href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/3.14.AdditionalProcedures.md#additional-procedures"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">额外步骤</font></font></h1>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然许多数据集使用FME默认值可以很好地工作，但某些格式需要额外的步骤来控制它们的读取或分析方式。</font><font style="vertical-align: inherit;">在本节中，我们将介绍一些可以帮助您处理一些开放的温哥华数据的过程。</font><font style="vertical-align: inherit;">如果需要，您可以跳过本节并直接进入分析，如果遇到任何障碍，请参阅本节。</font></font></p>
<h2><a id="user-content-reading-x-y-coordinates-as-points" class="anchor" aria-hidden="true" href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/3.14.AdditionalProcedures.md#reading-x-y-coordinates-as-points"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">读（X，Y）坐标为点</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果添加任何表格式读模块（* .csv，* .xlsx等），您可能会注意到它们是在没有几何对象的情况下导入的。</font><font style="vertical-align: inherit;">例如，添加具有默认设置的DrinkingFountains.csv文件只会添加具有字符串属性的要素。</font><font style="vertical-align: inherit;">为了读取点几何对象，必须告知FME哪些列包含数据的x和y坐标。</font><font style="vertical-align: inherit;">有两种方法可以做到这一点：</font></font></p>
<ol>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建读模块时，单击“参数”并查看窗口底部的“属性”表。</font><font style="vertical-align: inherit;">x_coord和y_coord列只是作为字符串而不是坐标读取。</font><font style="vertical-align: inherit;">要更改此项，请将“属性定义”按钮从“自动”更改为“手动” </font><font style="vertical-align: inherit;">然后使用Attributes表的Type列中的下拉列表将x_coord更改为x_coordinate，将y_coord更改为y_coordinate。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用默认参数添加读模块，然后将VertexCreator转换器附加到读模块。</font><font style="vertical-align: inherit;">这将根据x和y坐标属性创建点几何对象。</font><font style="vertical-align: inherit;">对于DrinkingFountains.csv，您将打开VertexCreator参数，对于X Value，选择x_coord，对于Y Value，选择y_coord。</font></font></p>
</li>
</ol>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：即使您有点几何对象，某些文件格式（如CSV）也不会存储坐标系信息。</font><font style="vertical-align: inherit;">您可以参考</font></font><a href="http://data.vancouver.ca/datacatalogue/index.htm" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">温哥华市的元数据</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来查找坐标系，或者可能存储为纬度和经度（LL84），UTM区域10N（UTM83-10）或BC Albers（BCALB-83或NAD83）。 BC /阿尔伯斯）。</font><font style="vertical-align: inherit;">一旦确定了正确的系统，就可以在导航器&gt; 读模块&gt; “坐标系”下设置它，或者在添加读模块时在对话框中的坐标系下设置，或者使用CoordinateSystemSetter转换器。</font><font style="vertical-align: inherit;">有关更多信息，</font><font style="vertical-align: inherit;">请参阅</font></font><a href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/..%5CIntegration3LabExercises%5C3.12.Exercise6.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">练习6</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<h2><a id="user-content-individual-versus-merged-feature-types" class="anchor" aria-hidden="true" href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/3.14.AdditionalProcedures.md#individual-versus-merged-feature-types"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单独与合并的要素类型</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些数据集包含多个要素类型。</font><font style="vertical-align: inherit;">例如，如果使用默认设置添加CommunityMap.gdb，则会显示“要读取的要素类型”对话框。</font><font style="vertical-align: inherit;">您可以在此处选择要作为要素类型读入的地理数据库中的哪些图层。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您拥有这样的数据时，您可以选择将数据作为单个或合并的要素类型进行读取。</font><font style="vertical-align: inherit;">最初添加读模块时，此选项仅出现在“添加读模块”对话框中。</font><font style="vertical-align: inherit;">如果不删除要素类型，则无法更改。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果选择单个要素类型，则每个图层（或类，表格等取决于格式）将作为单独的要素类型添加。</font><font style="vertical-align: inherit;">如果选择合并的要素类型，读模块会将所有图层组合成一个名为&lt;All&gt;的要素类型。</font><font style="vertical-align: inherit;">如果您不关心图层之间的区别并且只想将所有要素组合在一起，这将非常有用。</font></font></p>
<h2><a id="user-content-reading-attributes-in-special-formats" class="anchor" aria-hidden="true" href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/3.14.AdditionalProcedures.md#reading-attributes-in-special-formats"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以特殊格式读取属性</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些格式不能以直接的方式存储属性。</font><font style="vertical-align: inherit;">一个例子是CAD数据。</font><font style="vertical-align: inherit;">由于此格式是为创建数字技术图纸而设计的，因此默认情况下，这些要素不会像GIS一样存储在属性中。</font><font style="vertical-align: inherit;">但是，它们可以将属性存储为“扩展实体数据”。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这对读取CAD数据有影响。</font><font style="vertical-align: inherit;">例如，如果添加Autodesk AutoCAD DWG / DXF读模块并选择C：\ FMEData2018 \ Data \ Transportation \ CompleteRoads.dwg，则默认情况下只会读取几何图形。</font><font style="vertical-align: inherit;">但是，如果在读模块对话框中选择参数&gt;组实体依据&gt;属性模式，FME将读取几何对象并将其与每个要素的扩展实体数据相关联。</font><font style="vertical-align: inherit;">这允许您在分析中使用这些属性。</font><font style="vertical-align: inherit;">如果使用默认值（参数&gt;组实体&gt;&gt;图层名称）检查读模块，并将其与参数&gt;组实体依据&gt;属性模式进行比较，则可以看到此操作。</font><font style="vertical-align: inherit;">前者在表视图中将有一个空列&lt;无模式&gt;，后者将具有一系列属性。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">读取AutoCAD数据还有其他复杂因素。</font><font style="vertical-align: inherit;">如果您想了解更多信息，</font><font style="vertical-align: inherit;">可以查看我们的</font></font><a href="https://knowledge.safe.com/articles/22968/getting-started-with-autocad.html" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AutoCAD系列入门</font></font></a><font style="vertical-align: inherit;">。</font></p>
<h2><a id="user-content-joining-features" class="anchor" aria-hidden="true" href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/3.14.AdditionalProcedures.md#joining-features"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接要素</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，在FME中将两个数据流放在一起</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合并数据。</font><font style="vertical-align: inherit;">相反，数据被组合或聚合。</font><font style="vertical-align: inherit;">您可能知道这是一个数据联合。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了合并数据，您必须执行连接。</font><font style="vertical-align: inherit;">FME中有两种主要的连接：基于键和基于空间的连接。</font><font style="vertical-align: inherit;">基于键的连接基于共享的唯一键连接两个数据集，例如ID号，人口普查区ID或街道地址。</font><font style="vertical-align: inherit;">基于空间的连接基于空间位置连接两个数据集，例如，将人口普查区多边形的属性给予由所述区域包含的企业的点位置。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在FME中使用许多转换器来执行这些操作。</font><font style="vertical-align: inherit;">在这里，我们将展示两个最常见的连接操作。</font><font style="vertical-align: inherit;">有关更多信息，请参阅</font></font><a href="https://knowledge.safe.com/articles/34619/working-with-database-transformers-1.html" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">joiner转换器文章和流程图</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用FeatureJoiner的基于键的连接</font></font></strong></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FeatureJoine转换器使用SQL连接术语来组合基于共享唯一键的两个数据集。</font><font style="vertical-align: inherit;">默认的加入模式是内部连接。</font><font style="vertical-align: inherit;">对于内部连接，将根据左表和右表中的公共标识符或属性组合数据。</font></font></p>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用Overlayer转换器的基于空间的连接</font></font></strong></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FME配备了许多Overlayer转换器：</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AreaOnAreaOverlayer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LineOnAreaOverlayer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LineOnLineOverlayer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PointOnAreaOverlayer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PointOnLineOverlayer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PointOnPointOverlayer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SurfaceOnSurfaceOverlayer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VectorOnRasterOverlayer</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些转换器基于几何对象覆盖两个数据流。</font><font style="vertical-align: inherit;">默认情况下，它们只计算每个流中的重叠次数，并为名为_overlaps的两个层添加新属性。</font><font style="vertical-align: inherit;">但是，如果更改“属性聚合”&gt;“合并属性”下的设置，则可以组合属性以加入数据。</font><font style="vertical-align: inherit;">例如，如果使用VancouverNeighborhoods.kml作为多边形并使用DrinkingFountains.csv作为点（确保它们共享相同的坐标系），并检查合并属性，则多边形将获得它们重叠的第一个点的属性而点将获得它们重叠的街区多边形的属性。</font><font style="vertical-align: inherit;">通过这样的操作，您可以在层之间集成数据。</font></font></p>
<h2><a id="user-content-creating-charts-and-reports" class="anchor" aria-hidden="true" href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/3.14.AdditionalProcedures.md#creating-charts-and-reports"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建图表和报告</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示数据集成结果的一种简单方法是创建一个可视化。</font><font style="vertical-align: inherit;">FME有几个内置转换器，可以在这里提供帮助。</font><font style="vertical-align: inherit;">ChartGenerator可以创建图表。</font><font style="vertical-align: inherit;">只需添加ChartGenerator，选择图表类型，然后选择要分析的属性。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还可以使用HTMLReportGenerator轻松创建HTML报告。</font><font style="vertical-align: inherit;">您可以通过单击“页面内容”表并从下拉菜单中添加新内容来向页面添加元素。</font><font style="vertical-align: inherit;">每种内容类型都有自己的选项供您填写，可以使用属性动态创建。</font><font style="vertical-align: inherit;">例如，如果使用Overlayer转换器将一些数据集合在一起，然后使用StatisticsCalculator计算了一些平均值，则可以在此处创建这些值的表。</font><font style="vertical-align: inherit;">您可以使用“分组依据(Group By)”按组拆分分析。</font><font style="vertical-align: inherit;">最后，不要忘记将HTMLReportGenerator的内容写入HTML写模块。</font><font style="vertical-align: inherit;">完成后，您可以在Web浏览器中打开生成的HTML文件。</font></font></p>
<h2><a id="user-content-creating-raster-maps-using-mapnikrasterizer" class="anchor" aria-hidden="true" href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/3.14.AdditionalProcedures.md#creating-raster-maps-using-mapnikrasterizer"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用MapnikRasterizer创建栅格地图</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看</font></font><a href="https://blog.safe.com/2017/12/cartography/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关FME制图技巧的博客文章</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://knowledge.safe.com/articles/1092/introduction-to-mapnikrasterizer.html" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapnik Rasterizer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上的这篇文章</font><font style="vertical-align: inherit;">。</font></font></p>
<h2><a id="user-content-creating-labels-using-labelpointreplacer" class="anchor" aria-hidden="true" href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/3.14.AdditionalProcedures.md#creating-labels-using-labelpointreplacer"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用LabelPointReplacer创建标签</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们在</font></font><a href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/..%5CIntegration3LabExercises%5C3.09.Exercise4.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">练习4中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍了创建标签</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您在为地图创建标签时遇到问题，请参阅该练习。</font><font style="vertical-align: inherit;">需要记住几个关键点：</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用StringConcatenator转换器创建组合多个属性的标签。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签高度为你的数据单位，因此取决于坐标系。</font><font style="vertical-align: inherit;">您可以通过在FME Data Inspector中打开数据，选择要素并查看“要素信息”窗口来检查数据的线性单位。</font><font style="vertical-align: inherit;">显示的属性之一是坐标系(Coordinate System)。</font><font style="vertical-align: inherit;">单击其中的链接（例如UTM83-10）和“坐标系属性”窗口，打开有关系统的更多信息。</font><font style="vertical-align: inherit;">在这里您可以找到UNIT信息，例如UTM83-10，UNIT：METER。</font></font></li>
</ul>
<h2><a id="user-content-rejected-features" class="anchor" aria-hidden="true" href="https://github.com/safesoftware/FMETraining/blob/FME-Desktop-Data-Integration-2018/Integration3LabExercises/3.14.AdditionalProcedures.md#rejected-features"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被拒绝的要素？</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可能会在日志中遇到此错误消息：</font></font></p>

<pre><code>ERROR |{TRANSFORMER NAME}_&lt;Rejected&gt;: Termination Message: '{TRANSFORMER NAME} output a &lt;Rejected&gt; feature.  To continue translation when features are rejected, change 'Workspace Parameters' &gt; Translation &gt; 'Rejected Feature Handling' to 'Continue Translation''
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着您的某个转换器拒绝了某个要素（上面的消息已编辑为使用占位符</font></font><code>{TRANSFORMER NAME}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">拒绝的要素有时可能意味着您的工作空间出现问题，尤其是在转换器仅输出被拒绝的要素时。</font><font style="vertical-align: inherit;">然而，在某些情况下，被拒绝的要素是意料之中的。</font><font style="vertical-align: inherit;">因此，FME为您提供了决定如何处理被拒绝要素的选项。</font><font style="vertical-align: inherit;">有关详细信息，请参阅[我们的培训手册部分]（{{book.basic_link}} DesktopBasic3WorkspaceDesign / 3.03.RejectedPorts.html）。</font></font></p>
</article>
  </div>
