## 作为订阅者和发布者的工作空间 ##

我们现在已经了解了如何将工作空间设置为订阅者（对传入消息做出反应）以及如何将工作空间设置为发布者（发送传出消息）。工作空间可以单独执行每个任务，但是当它同时设置为订阅者和发布者时，整体设置如下所示：

![](./Images/Img4.034.TransformativeNotificationLayout3.png)

在此方案中，接收传入通知的同一工作空间也会发送传出通知。它被设置为具有订阅组件的订阅者，以便通过在不同服务上注册通知参数来接收传入通知并设置为发布者。

例如，通过LightningStrike主题接收雷击的详细信息。观看该主题的发布启动处理传入信息的工作空间; 例如，它确定发生罢工的州/省/县。工作空间然后创建新消息并通过WeatherAlert主题将其分发给订阅者。

要认识到的重要一点是，场景必须至少涉及两个不同的主题。

如果您设置了这样的方案但尝试对传入和传出消息使用相同的主题，则会出现一个主要问题。那是因为工作空间将被设置为发布的每条消息的订阅者！它将重新发布每个传出消息，导致无限循环的消息！

---

<table style="border-spacing: 0px">
<tr>
<td style="vertical-align:middle;background-color:darkorange;border: 2px solid darkorange">
<i class="fa fa-quote-left fa-lg fa-pull-left fa-fw" style="color:white;padding-right: 12px;vertical-align:text-top"></i>
<span style="color:white;font-size:x-large;font-weight: bold;font-family:serif">《Interop日报》记者查德·帕格-利泽说 …</span>
</td>
</tr>

<tr>
<td style="border: 1px solid darkorange">
<span style="font-family:serif; font-style:italic; font-size:larger">
对传入和传出通知使用相同的主题就像设置电子邮件以将所有传入的消息转发给您自己，或者自动转发您自己的推特。你最终会得到一个循环，直到你崩溃系统为止！ 
<br><br>为了避免混淆，最好通过它们的名字来澄清哪些主题可以进行内外交流; 例如，使用LightningStrike_In和LightningStrike_Out来区分。
</span>
</td>
</tr>
</table>
